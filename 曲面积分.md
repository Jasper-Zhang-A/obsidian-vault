# 曲面面积计算：半球面被柱面所截

#calculus #surface-integral #common-mistakes

---

## 题目

求半球面 $S: x^2 + y^2 + z^2 = 2, z \ge 0$ 被柱面 $x^2 + y^2 = 1$ 所截下的帽形部分的曲面面积。

[讲解视频](https://www.bilibili.com/video/BV1yG4y157eu?t=1218.9)


---

## 核心思路与公式

对于一个由 $f(x,y,z) = c$ 定义的隐式曲面，其投影到 $xy$ 平面上的区域为 $R$，面积公式为：
$$ A = \iint_S d\sigma = \iint_R \frac{|\nabla f|}{|\nabla f \cdot \mathbf{p}|} dA $$
其中 $\mathbf{p}$ 是投影平面的单位法向量。对于 $xy$ 平面，$\mathbf{p} = \mathbf{k}$。

---

## 正确解法步骤

#### 1. 定义曲面函数和投影区域
- 曲面函数为 $f(x,y,z) = x^2 + y^2 + z^2 = 2$。
- 曲面在 $xy$ 平面上的投影区域 $R$ 是由柱面 $x^2 + y^2 = 1$ 定义的圆域。

#### 2. 计算梯度及其模长
- 梯度 $\nabla f = \frac{\partial f}{\partial x}\mathbf{i} + \frac{\partial f}{\partial y}\mathbf{j} + \frac{\partial f}{\partial z}\mathbf{k} = 2x\mathbf{i} + 2y\mathbf{j} + 2z\mathbf{k}$。
- 梯度模长 $|\nabla f| = \sqrt{(2x)^2 + (2y)^2 + (2z)^2} = \sqrt{4(x^2+y^2+z^2)}$。
- **关键点:** 因为点 $(x,y,z)$ 在曲面上，所以满足 $x^2+y^2+z^2=2$。代入得：
  $$ |\nabla f| = \sqrt{4(2)} = \sqrt{8} = 2\sqrt{2} $$

#### 3. 计算投影项 $|\nabla f \cdot \mathbf{k}|$
- $\nabla f \cdot \mathbf{k} = (2x\mathbf{i} + 2y\mathbf{j} + 2z\mathbf{k}) \cdot \mathbf{k} = 2z$。
- 因为题目指明是上半球面 ($z \ge 0$)，所以 $|\nabla f \cdot \mathbf{k}| = |2z| = 2z$。

#### 4. 建立面积积分
- 将上述结果代入公式：
  $$ A = \iint_R \frac{2\sqrt{2}}{2z} dA = \iint_R \frac{\sqrt{2}}{z} dA $$

#### 5. 坐标变换与计算
- 在投影区域 $R$ 上，使用极坐标变换。
- $x = r\cos\theta, y = r\sin\theta, dA = r\,dr\,d\theta$。
- 投影区域 $R: x^2+y^2 \le 1$ 变为 $0 \le r \le 1, 0 \le \theta \le 2\pi$。
- **关键点:** 将 $z$ 用 $r$ 表示。从曲面方程 $x^2+y^2+z^2=2$ 可得 $z = \sqrt{2-(x^2+y^2)} = \sqrt{2-r^2}$。
- 代入积分式：
  $$ A = \int_0^{2\pi} \int_0^1 \frac{\sqrt{2}}{\sqrt{2-r^2}} r\,dr\,d\theta $$
- 先对 $r$ 积分（使用 u-substitution, 令 $u=2-r^2, du=-2r\,dr$）：
  $$ \int_0^1 \frac{\sqrt{2} \cdot r}{\sqrt{2-r^2}} dr = \sqrt{2} \int_2^1 \frac{1}{\sqrt{u}} (-\frac{1}{2}du) = -\frac{\sqrt{2}}{2} [2\sqrt{u}]_2^1 = -\sqrt{2}(\sqrt{1}-\sqrt{2}) = \sqrt{2}(\sqrt{2}-1) = 2-\sqrt{2} $$
- 再对 $\theta$ 积分：
  $$ A = \int_0^{2\pi} (2-\sqrt{2}) d\theta = (2-\sqrt{2})[\theta]_0^{2\pi} = 2\pi(2-\sqrt{2}) $$

---

## 我的错误分析

> [!bug] 我的错误复盘
> 我在解题时犯了两个关键错误，导致结果完全偏离。

### 错误一：计算梯度模长时忘记开根号

我错误地将 $|\nabla f|$ 当成了 $|\nabla f|^2$。
- **我的计算:** $\nabla f = 2x\mathbf{i} + 2y\mathbf{j} + 2z\mathbf{k}$
- 我直接取了平方和：$|\nabla f|_{wrong} = (2x)^2+(2y)^2+(2z)^2 = 4(x^2+y^2+z^2) = 4(2) = 8$。
- **正确的值应该是:** $|\nabla f| = \sqrt{8} = 2\sqrt{2}$。
- 这个错误导致我的被积函数分子从 $2\sqrt{2}$ 变成了 $8$。

### 错误二：极坐标换元时 z 替换错误

在将 $z$ 替换为用 $r$ 表示的式子时，我再次出错。
- **我的替换:** $z_{wrong} = 2-r$
- **正确的替换应该是:** $z = \sqrt{2-r^2}$
- 这个错误导致我的被积函数分母出现了严重偏差。

### 两个错误叠加的后果

将这两个错误结合起来，我建立的积分是这样的：
$$ A_{wrong} = \iint_R \frac{8}{2z_{wrong}} dA = \iint_R \frac{4}{2-r^2} dA $$
写成极坐标定积分：
$$ A_{wrong} = \int_0^{2\pi} \int_0^1 \frac{4}{2-r^2} r\,dr\,d\theta $$
这个积分的结果会包含对数函数（$\ln(2-r^2)$），与正确答案 $2\pi(2-\sqrt{2})$ 在形式和数值上都相差甚远。

---

> [!summary] 总结与反思
> 1.  **梯度的模长**：计算 $|\nabla f|$ 时，最后一步**一定不要忘记开平方根**！这是最容易犯的错误之一。
> 2.  **变量代换**：在坐标系变换时，必须**准确无误地代换**所有变量。从 $z = \sqrt{2-x^2-y^2}$ 到 $z = \sqrt{2-r^2}$，根号不能丢。
> 3.  **检查合理性**：如果计算出的结果形式很奇怪或者很复杂（如此处的对数函数），可以回头检查一下关键步骤，特别是**梯度模长**和**变量代换**这两步。



# 标量函数的曲面积分：立方体表面

#calculus #surface-integral #common-mistakes

---

## 题目

对函数 $G(x,y,z) = xyz$ 在**第一卦限**内，由平面 $x=1, y=1$ 和 $z=1$ 以及三个坐标平面所围成的正方体表面上进行曲面积分。

[视频链接](https://www.bilibili.com/video/BV1yG4y157eu?t=1727.9)


## 核心思路与公式

对于标量函数 $G(x,y,z)$ 在曲面 $S$ 上的积分，其计算方法是：
$$ \iint_S G(x,y,z) \,d\sigma $$
当曲面 $S$ 由 $f(x,y,z) = c$ 定义，并可以投影到某个平面上时（例如投影到xy平面，区域为R），我们可以用面积元转换公式来计算：
$$ d\sigma = \frac{|\nabla f|}{|\nabla f \cdot \mathbf{p}|} dA $$
其中 $\mathbf{p}$ 是投影平面的单位法向量。

---

## 正确解法步骤

#### 1. 确定积分曲面
- **关键点：** 题目指明是“第一卦限”的正方体，其表面由6个面组成：
    1.  **面 A:** $z=1$, ($0 \le x \le 1, 0 \le y \le 1$)
    2.  **面 B:** $y=1$, ($0 \le x \le 1, 0 \le z \le 1$)
    3.  **面 C:** $x=1$, ($0 \le y \le 1, 0 \le z \le 1$)
    4.  **后侧面:** $y=0$
    5.  **左侧面:** $x=0$
    6.  **底面:** $z=0$

#### 2. 分析与简化
- 在后侧面 ($y=0$)、左侧面 ($x=0$) 和底面 ($z=0$) 这三个面上，被积函数 $G(x,y,z) = xyz$ 的值恒为 0。
- 因此，这三个面上的曲面积分结果都为 0。
- 我们只需要计算面 A、B、C 上的积分，然后相加。
$$ \iint_{\text{正方体表面}} xyz \,d\sigma = \iint_A xyz \,d\sigma + \iint_B xyz \,d\sigma + \iint_C xyz \,d\sigma + 0 + 0 + 0 $$

#### 3. 计算面 A (z=1) 上的积分
- **曲面函数:** $f(x,y,z) = z = 1$。
- **投影:** 向 $xy$ 平面投影，$\mathbf{p} = \mathbf{k}$。
- **梯度:** $\nabla f = \nabla(z) = \mathbf{k}$。
- **面积元:** $|\nabla f|=1$, $|\nabla f \cdot \mathbf{k}| = |\mathbf{k} \cdot \mathbf{k}| = 1$。因此 $d\sigma = \frac{1}{1}dA = dx\,dy$。
- **被积函数:** 在面 A 上，$z=1$，所以 $G(x,y,1) = xy$。
- **积分计算:**
  $$ \iint_A xyz \,d\sigma = \iint_{R_{xy}} xy \,dx\,dy = \int_0^1 \int_0^1 xy \,dx\,dy $$
  $$ = \int_0^1 y \left[ \frac{x^2}{2} \right]_0^1 dy = \int_0^1 \frac{y}{2} dy = \left[ \frac{y^2}{4} \right]_0^1 = \frac{1}{4} $$

#### 4. 利用对称性求总和
- 由于几何形状和被积函数的对称性，面 B ($y=1$) 和面 C ($x=1$) 上的积分结果与面 A 相同。
- $\iint_B xyz \,d\sigma = \frac{1}{4}$
- $\iint_C xyz \,d\sigma = \frac{1}{4}$
- **最终结果:**
  $$ \iint_{\text{正方体表面}} xyz \,d\sigma = \frac{1}{4} + \frac{1}{4} + \frac{1}{4} = \frac{3}{4} $$

---

## 我的错误分析

> [!bug] 我的错误复盘
> 在做这道题时，我连续犯了四个错误，导致无法得出正确答案。下面是我的“踩坑”记录。

### 错误一：审题不清，没看到“第一卦限”

- **我的想法：** 我把题目想成了一个完整的、以原点为中心的正方体，试图去考虑全部6个面，比如 $z=1$ 和 $z=-1$ 等。
- **问题所在：** 题目明确限定在“第一卦限”，这意味着立方体的边界就是 $x=0, y=0, z=0$ 和 $x=1, y=1, z=1$ 这六个平面。这个前提是解题的第一步，如果搞错了，整个问题空间都错了。

### 错误二：对被积函数 G 求梯度

- **我的想法：** 我试图去计算 $G(x,y,z) = xyz$ 的梯度，即 $\nabla G$。
- **问题所在：** 这是概念性错误。在计算曲面积分 $\iint_S G \,d\sigma$ 时，我们需要的是定义**曲面形状**的函数 $f(x,y,z)=c$ 的梯度 $\nabla f$，用它来计算面积元 $d\sigma$。而 $G(x,y,z)$ 是我们要在该曲面上进行积分的**标量值（好比密度）**，两者用途完全不同。

### 错误三：错误地计算平面的梯度

- **我的想法：** 在考虑面 A ($z=1$) 时，我认为 $z=1$ 是一个常数，所以它的梯度 $\nabla f$ 是 $(0,0,0)$。
- **问题所在：** 这是一个非常常见的误解。我们不是对常数值 `1` 求导，而是对定义这个平面的**函数** $f(x,y,z) = z$ 求梯度。
    - **正确理解:** 函数是 $f(x,y,z)=z$。它的梯度是 $\nabla f = \frac{\partial z}{\partial x}\mathbf{i} + \frac{\partial z}{\partial y}\mathbf{j} + \frac{\partial z}{\partial z}\mathbf{k} = 0\mathbf{i} + 0\mathbf{j} + 1\mathbf{k} = \mathbf{k}$。这个梯度向量处处指向Z轴正方向，完美描述了 $z$ 变化最快的方向，与 $z=c$ 的平面垂直。

### 错误四：把积分值和面积搞混

- **我的想法：** 在计算面 A 上的积分 $\iint_A xy \,d\sigma$ 时，我理所当然地认为，既然投影区域的面积是 $1 \times 1 = 1$，那积分结果就是1。
- **问题所在：**
    - 只有当被积函数恒为 1 时，曲面积分的结果才是曲面的面积，即 $\iint_S 1 \,d\sigma = \text{Area}(S)$。
    - 在本题中，被积函数是 $xy$。这个值在面 A 上是变化的（例如在原点是0，在(1,1,1)点是1）。我们必须通过**定积分**来求出这个变化的量在整个面上的“累积和”，而不能简单地用面积代替。

---

> [!summary] 总结与反思
> 1.  **仔细审题是第一位**：看清积分区域（第一卦限）和积分曲面（正方体表面）。
> 2.  **分清两个函数**：$G(x,y,z)$ 是**积分对象**，$f(x,y,z)=c$ 是**曲面定义**。算 $d\sigma$ 时用法向向量，用法向向量要用 $\nabla f$。
> 3.  **平面的梯度**：平面 $z=c$ 的梯度是 $\mathbf{k}$，而不是零向量。要对函数 $f(x,y,z)=z$ 求导。
> 4.  **积分不是面积**：除非被积函数是1，否则必须老老实实计算二重积分，不能用面积直接替代积分值。


# 薄壳曲面的质心计算方法

#calculus #surface-integral #center-of-mass #physics-application

---

## 核心公式

> [!abstract] 定义与公式
> 对于一个密度为 $\delta(x,y,z)$ 的薄壳曲面 $S$，其质量、一阶矩和质心坐标由以下曲面积分定义：
>
> - **总质量 (Mass):**
>   $$ M = \iint_S \delta(x,y,z) \, d\sigma $$
>
> - **关于各坐标平面的一阶矩 (First Moments):**
>   - 关于 yz 平面:  $$M_{yz} = \iint_S x\delta \, d\sigma $$
>   - 关于 xz 平面: $$ M_{xz} = \iint_S y\delta \, d\sigma $$
>   - 关于 xy 平面: $$ M_{xy} = \iint_S z\delta \, d\sigma $$
>
> - **质心坐标 (Center of Mass):**
>   $$ \bar{x} = \frac{M_{yz}}{M}, \quad \bar{y} = \frac{M_{xz}}{M}, \quad \bar{z} = \frac{M_{xy}}{M} $$

---

## 通用解题步骤


结合公式和范例，求解薄壳质心问题通常遵循以下四个步骤：

### **第一步：利用对称性进行简化**

在开始计算前，首先观察曲面 $S$ 的几何形状和密度函数 $\delta$ 是否具有对称性。
- 如果曲面和密度函数关于某个平面（例如 yz-平面）对称，那么质心一定位于该平面上（即 $\bar{x}=0$）。
- 这可以大大减少计算量，比如在半球壳的例子中，由于图形关于 z-轴对称，直接得出 $\bar{x}=0$ 和 $\bar{y}=0$，只需要计算 $\bar{z}$ 即可。

### **第二步：计算总质量 M**

计算总质量 $M = \iint_S \delta \,d\sigma$。
> [!tip] 计算技巧
> 如果密度 $\delta$ 是一个常数，那么计算可以简化为：
> $$ M = \delta \iint_S d\sigma = \delta \cdot (\text{曲面 S 的面积}) $$
> 此时，如果 S 是标准几何体（如球面、半球面），可以直接使用其面积公式。例如，半径为 a 的半球壳面积为 $2\pi a^2$，其质量为 $M=2\pi a^2\delta$。

### **第三步：计算所需的一阶矩**

根据第一步的对称性分析，计算剩下未知的质心坐标所需的一阶矩。例如，如果只需要求 $\bar{z}$，那就计算 $M_{xy} = \iint_S z\delta \,d\sigma$。

这一步通常是计算的核心，需要完整的曲面积分计算：
1.  **定义曲面函数：** 将曲面 S 表示为 $f(x,y,z)=c$ 的形式。
2.  **选择投影平面：** 选择一个合适的坐标平面（如 xy-平面）作为投影面。
3.  **计算面积元 $d\sigma$：** 使用公式 $d\sigma = \frac{|\nabla f|}{|\nabla f \cdot \mathbf{p}|}dA$ 进行转换，其中 $\mathbf{p}$ 是投影平面的法向量。
4.  **建立并求解二重积分：** 将变量和 $d\sigma$ 都用投影坐标（如 $x,y$ 或极坐标 $r,\theta$）表示，然后求解二重积分。

### **第四步：求出质心坐标**

将第二步和第三步计算出的质量 $M$ 和一阶矩代入公式，求出最终的质心坐标 $(\bar{x}, \bar{y}, \bar{z})$。

---

## 实例解析：求半球壳的质心

> [!example] 题目：求半径为 a，密度为常数 $\delta$ 的薄半球壳 $z \ge 0$ 的质心。

我们用上述四个步骤来分析这个例子：
1.  **利用对称性：**
    - 物体是半球壳，关于 z-轴旋转对称。密度 $\delta$ 为常数，也是对称的。
    - 因此，质心一定在 z-轴上，即 $\bar{x}=0, \bar{y}=0$。我们只需要计算 $\bar{z}$。

2.  **计算总质量 M：**
    - 密度 $\delta$ 是常数。
    - 半球壳的面积是 $2\pi a^2$。
    - $M = \delta \cdot (\text{面积}) = 2\pi a^2 \delta$。

3.  **计算一阶矩 $M_{xy}$：**
    - $M_{xy} = \iint_S z\delta \, d\sigma$。
    - 曲面函数 $f(x,y,z) = x^2+y^2+z^2=a^2$，所以 $|\nabla f|=2\sqrt{x^2+y^2+z^2}=2a$。
    - 投影到 xy-平面，法向量 $\mathbf{p}=\mathbf{k}$，所以 $|\nabla f \cdot \mathbf{k}|=|2z|=2z$。
    - 面积元 $d\sigma = \frac{2a}{2z}dA = \frac{a}{z}dA$。
    - 代入积分：
      $$ M_{xy} = \iint_S z\delta \left( \frac{a}{z}dA \right) = \iint_{R_{xy}} \delta a \, dA $$
      这里 $z$ 被消掉了，这是一个重要的简化！
    - 投影区域 $R_{xy}$ 是一个半径为 a 的圆盘，面积为 $\pi a^2$。
    - $M_{xy} = \delta a \cdot (\text{投影区域面积}) = \delta a (\pi a^2) = \pi a^3 \delta$。

4.  **求出质心坐标 $\bar{z}$：**
    - $\bar{z} = \frac{M_{xy}}{M} = \frac{\pi a^3 \delta}{2\pi a^2 \delta} = \frac{a}{2}$。
    - **结论：** 质心为 $(0, 0, \frac{a}{2})$。


