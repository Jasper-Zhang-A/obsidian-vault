# 参数化曲面的面积与积分

#calculus #surface-integral #parametrization #flux

---

## 核心思想：一切始于参数化

当一个曲面 $S$ 是由参数方程 $\mathbf{r}(u,v)$ 给出时，无论是计算它的面积、标量函数的曲面积分，还是矢量场的通量，所有计算的**基础和关键**都源于叉乘向量 $\mathbf{r}_u \times \mathbf{r}_v$。

## 1. 曲面面积元与曲面面积

#### 关键向量的计算
首先，我们需要计算偏导数向量 $\mathbf{r}_u = \frac{\partial \mathbf{r}}{\partial u}$ 和 $\mathbf{r}_v = \frac{\partial \mathbf{r}}{\partial v}$，然后计算它们的叉乘。

> [!example] 实例：求球面面积元 
> 对于半径为 a 的球面，其参数方程（球坐标 spherical coordinate）为：
> $$ \mathbf{r}(\phi, \theta) = (a\sin\phi\cos\theta)\mathbf{i} + (a\sin\phi\sin\theta)\mathbf{j} + (a\cos\phi)\mathbf{k} $$
> 其中 $0 \le \phi \le \pi, 0 \le \theta \le 2\pi$。
>
> 1.  **求偏导:**
>     - $\mathbf{r}_\phi = (a\cos\phi\cos\theta)\mathbf{i} + (a\cos\phi\sin\theta)\mathbf{j} - (a\sin\phi)\mathbf{k}$
>     - $\mathbf{r}_\theta = (-a\sin\phi\sin\theta)\mathbf{i} + (a\sin\phi\cos\theta)\mathbf{j} + 0\mathbf{k}$
> 2.  **计算叉乘:**
>     $$ \mathbf{r}_\phi \times \mathbf{r}_\theta = (a^2\sin^2\phi\cos\theta)\mathbf{i} + (a^2\sin^2\phi\sin\theta)\mathbf{j} + (a^2\sin\phi\cos\phi)\mathbf{k} $$
>     这个向量的方向是沿径向向外的，是球面的法向量。

#### 面积元与面积计算
面积元 $d\sigma$ 就是上述叉乘向量的模长。
$$ d\sigma = |\mathbf{r}_u \times \mathbf{r}_v| \,du\,dv $$
总面积就是对面积元进行积分。
$$ A = \iint_S d\sigma = \iint_D |\mathbf{r}_u \times \mathbf{r}_v| \,du\,dv $$

> [!example] 续：求球面面积 
> 1.  **计算模长:**
>     $$ |\mathbf{r}_\phi \times \mathbf{r}_\theta| = \sqrt{(a^2\sin^2\phi\cos\theta)^2 + (a^2\sin^2\phi\sin\theta)^2 + (a^2\sin\phi\cos\phi)^2} = a^2\sin\phi $$
>     (因为 $0 \le \phi \le \pi$, 所以 $\sin\phi \ge 0$)。
> 2.  **积分求面积:**
>     $$ A = \int_0^{2\pi} \int_0^\pi a^2\sin\phi \,d\phi\,d\theta = a^2 \int_0^{2\pi} [-\cos\phi]_0^\pi d\theta = a^2 \int_0^{2\pi} 2\,d\theta = 4\pi a^2 $$

## 2. 参数曲面上标量函数的积分

这相当于在计算曲面面积的基础上，给每个微小面积元乘上一个“权重”或“密度” $G(x,y,z)$。
**公式**：
$$ \iint_S G(x,y,z) \,d\sigma = \iint_D G(\mathbf{r}(u,v)) |\mathbf{r}_u \times \mathbf{r}_v| \,du\,dv $$


> [!example] 实例：计算 $\iint_S x^2 d\sigma$ (源于图 68b5e4)
> 在锥面 $z=\sqrt{x^2+y^2}, 0 \le z \le 1$ 上计算积分。
>
> - 已知该锥面的参数化下 $|\mathbf{r}_r \times \mathbf{r}_\theta| = \sqrt{2}r$。
> - 参数方程为 $\mathbf{r}(r,\theta) = (r\cos\theta)\mathbf{i} + (r\sin\theta)\mathbf{j} + r\mathbf{k}$，所以 $x=r\cos\theta$。
> - 被积函数 $G(x,y,z)=x^2$ 变为 $(r\cos\theta)^2 = r^2\cos^2\theta$。
> - **建立积分:**
>   $$ \iint_S x^2 d\sigma = \int_0^{2\pi} \int_0^1 (r^2\cos^2\theta)(\sqrt{2}r) \,dr\,d\theta = \sqrt{2} \int_0^{2\pi} \cos^2\theta \left[ \frac{r^4}{4} \right]_0^1 d\theta $$
>   $$ = \frac{\sqrt{2}}{4} \int_0^{2\pi} \cos^2\theta d\theta = \frac{\sqrt{2}}{4} \left[ \frac{\theta}{2} + \frac{1}{4}\sin(2\theta) \right]_0^{2\pi} = \frac{\pi\sqrt{2}}{4} $$
>  

## 3. 参数曲面上矢量场的通量

通量计算的是矢量场 $\mathbf{F}$ 穿过曲面 $S$ 的净流量。
**公式**：
$$ \text{通量} = \iint_S \mathbf{F} \cdot \mathbf{n} \,d\sigma $$
对于参数曲面，法向量和面积元的组合 $\mathbf{n}\,d\sigma$ 可以直接用叉乘向量 $\pm(\mathbf{r}_u \times \mathbf{r}_v)\,du\,dv$ 代替。正负号取决于所需的法向量方向（例如向外、向内、向上或向下）。
$$ \text{通量} = \iint_D \mathbf{F}(\mathbf{r}(u,v)) \cdot (\pm \mathbf{r}_u \times \mathbf{r}_v) \,du\,dv $$


---

## 我的错误分析与总结 (针对图 68ba79)

> [!bug] 错误复盘：在求抛物柱面通量时找错参数方程
> **问题描述：** 在计算矢量场穿过抛物柱面 $y=x^2$ 的通量时，我在第一步“建立参数方程”时就出错了。
>
> **我的错误思路：** 我看到 $y=x^2$，就想把它写成一个隐函数 $f(x,y,z) = 0$ 的形式，我当时写的是 $x^2-y = 0$ 或者 $x^2-y-0z=0$。然后我试图对这个“函数”求偏导，但这就完全偏离了参数化的轨道。
>
> ### 错误原因剖析
>
> 错误的关键在于**混淆了“隐函数表示法”和“参数方程表示法”**。
>
> 1.  **隐函数法**：$f(x,y,z)=c$。这种方法通常用来求**梯度** $\nabla f$，梯度向量可以作为法向量。这在曲面由 $z=g(x,y)$ 给出时很常用，但不是参数法的核心。
> 2.  **参数方程法**：$\mathbf{r}(u,v)$。这种方法的核心是找到两个独立的参数 $(u,v)$ 来描述曲面上的点，然后通过计算**叉乘** $\mathbf{r}_u \times \mathbf{r}_v$ 来得到法向量。
>
> 我当时想用隐函数的方法，却走到了参数法的路线上，导致后续步骤（如求偏导和叉乘）所依赖的基础就是错的。
>
> ### 正确的参数化方法
>
> 对于抛物柱面 $y=x^2$，我们可以观察到，一个点的位置可以由它的 $x$ 坐标和 $z$ 坐标完全确定。因此，最自然的参数就是 $x$ 和 $z$ 本身。
>
> 3.  **选择参数：** 令 $u=x, v=z$。
> 4.  **建立参数方程：**
>     - $x$ 坐标就是参数 $x$。
>     - $y$ 坐标由方程决定，是 $x^2$。
>     - $z$ 坐标就是参数 $z$。
>     所以，参数方程为：
>     $$ \mathbf{r}(x,z) = x\mathbf{i} + x^2\mathbf{j} + z\mathbf{k} $$
>    
> 5.  **进行后续计算：**
>     - $\mathbf{r}_x = \mathbf{i} + 2x\mathbf{j}$
>     - $\mathbf{r}_z = \mathbf{k}$
>     - $\mathbf{r}_x \times \mathbf{r}_z = (\mathbf{i} + 2x\mathbf{j}) \times \mathbf{k} = 2x\mathbf{i} - \mathbf{j}$
>
>     这个结果与标准答案完全一致，后续的通量计算也就水到渠成了。
>
> ### 总结
>
> > 对于柱面或类似 $z=f(x,y)$ 的曲面，**最直接的参数化方法就是选择自变量作为参数**。
> > - 对 $z=f(x,y)$，选 `x` 和 `y` 作参数：$\mathbf{r}(x,y) = x\mathbf{i} + y\mathbf{j} + f(x,y)\mathbf{k}$。
> > - 对 $y=f(x,z)$ (如本例)，选 `x` 和 `z` 作参数：$\mathbf{r}(x,z) = x\mathbf{i} + f(x,z)\mathbf{j} + z\mathbf{k}$。
> > 这样做思路清晰，不容易出错。


# 梯度法计算曲面积分 (图 68ba79 例7 的另一解法)

#calculus #flux #surface-integral #gradient

---

## 问题回顾

> [!question]
> 求矢量场 $\mathbf{F} = yz\mathbf{i} + x\mathbf{j} - z^2\mathbf{k}$ 穿过抛物柱面 $y=x^2$ ($0 \le x \le 1, 0 \le z \le 4$) 向外的通量。

之前我们讨论了使用参数方程 $\mathbf{r}(x,z)$ 求解的方法。现在我们完全不使用参数化，而是回归到更早学习的、基于梯度的求解方法。

## 梯度法求解步骤

### **第一步：将曲面表示为隐函数 `f(x,y,z) = c`**

曲面方程为 $y=x^2$。我们可以将其改写为隐函数形式：
$$ f(x,y,z) = y - x^2 = 0 $$
或者 $f(x,y,z) = x^2 - y = 0$。这两种选择都是可以的，它们的区别只在于计算出的梯度方向相反，我们可以在后续步骤中根据题目要求的“向外”方向来选择正确的法向量。

我们选择 $f(x,y,z) = x^2 - y$，因为它的梯度方向恰好与参数法中叉乘的方向一致。

### **第二步：计算梯度 `∇f` 作为法向量**

梯度向量 $\nabla f$ 永远与曲面 $f(x,y,z)=c$ 的等值面垂直，因此可以作为法向量。
$$ \nabla f = \frac{\partial f}{\partial x}\mathbf{i} + \frac{\partial f}{\partial y}\mathbf{j} + \frac{\partial f}{\partial z}\mathbf{k} = 2x\mathbf{i} - \mathbf{j} $$
这个向量 $\mathbf{N} = 2x\mathbf{i} - \mathbf{j}$ 就是曲面的一个法向量。

### **第三步：选择投影平面并确定面积元 `dσ`**

由于曲面由 $y=g(x,z)$ 形式给出，最自然的投影平面是 **xz-平面**。
- 投影区域 $R$ 是一个矩形：$0 \le x \le 1, 0 \le z \le 4$。
- 对于投影到 xz-平面的曲面，面积分中的 $\mathbf{n}\,d\sigma$ 可以用梯度和投影面积元 $dA=dx\,dz$ 来替换：
  $$ \mathbf{n}\,d\sigma = \pm \frac{\nabla f}{|\nabla f \cdot \mathbf{j}|} |\nabla f|\,dA $$
  这里的 $\mathbf{j}$ 是投影平面（xz-平面）的法向量。一个更直接的等价公式是：
  $$ \mathbf{n}\,d\sigma = \pm \nabla f \,dA $$
  这里的正负号取决于我们需要的法向量方向（向外还是向内）。

### **第四步：确定法向量方向并建立积分**

1.  **判断方向：** 我们的法向量是 $\mathbf{N} = 2x\mathbf{i} - \mathbf{j}$。在 $x>0$ 的区域，这个向量的 $x$ 分量为正，指向 x 轴正向，这与题目图示中“向外”（远离 yz-平面）的方向一致。因此，我们直接使用 $+\nabla f$ 作为法向量方向。
2.  **替换被积函数：** 在曲面 $y=x^2$ 上，矢量场 $\mathbf{F}$ 为：
    $$ \mathbf{F} = (x^2)z\mathbf{i} + x\mathbf{j} - z^2\mathbf{k} $$
3.  **建立通量积分：**
    $$ \text{通量} = \iint_S \mathbf{F}\cdot\mathbf{n}\,d\sigma = \iint_R \mathbf{F} \cdot (\nabla f) \,dx\,dz $$

### **第五步：计算点积并求解积分**

1.  **计算点积：**
    $$ \mathbf{F} \cdot \nabla f = (x^2z\mathbf{i} + x\mathbf{j} - z^2\mathbf{k}) \cdot (2x\mathbf{i} - \mathbf{j}) $$
    $$ = (x^2z)(2x) + (x)(-1) + (-z^2)(0) = 2x^3z - x $$
2.  **计算二重积分：**
    $$ \text{通量} = \int_0^4 \int_0^1 (2x^3z - x) \,dx\,dz $$
    - 先对 $x$ 积分：
      $$ \int_0^1 (2x^3z - x) \,dx = \left[ \frac{2x^4}{4}z - \frac{x^2}{2} \right]_0^1 = \frac{z}{2} - \frac{1}{2} $$
    - 再对 $z$ 积分：
      $$ \int_0^4 \left(\frac{z}{2} - \frac{1}{2}\right) dz = \frac{1}{2} \int_0^4 (z-1) dz = \frac{1}{2} \left[ \frac{z^2}{2} - z \right]_0^4 $$
      $$ = \frac{1}{2} \left( (\frac{16}{2} - 4) - 0 \right) = \frac{1}{2}(8-4) = 2 $$
     

## 结论

> [!success]
> 使用梯度法计算出的结果为 **2**，与图中给出的参数法计算结果完全相同。这验证了你的想法：**对于能写成 $z=f(x,y)$ 或 $y=g(x,z)$ 等形式的曲面，梯度法和参数法是解决曲面积分问题的两条等价且有效的途径。**
>
> **两种方法殊途同归：**
> - **参数法**的核心是计算叉乘 $\mathbf{r}_u \times \mathbf{r}_v$ 得到法向量。
> - **梯度法**的核心是计算梯度 $\nabla f$ 得到法向量。
>
> 对于本题的曲面 $y=x^2$，参数法中选择 $x,z$ 为参数得到的法向量 $\mathbf{r}_x \times \mathbf{r}_z = 2x\mathbf{i} - \mathbf{j}$，与梯度法中选择 $f=x^2-y$ 得到的法向量 $\nabla f = 2x\mathbf{i} - \mathbf{j}$ 是完全一样的。