# 曲面积分综合学习笔记

#calculus #surface-integral #parametrization #flux #gradient #common-mistakes

---

## 一、核心方法一：参数方程法

当一个曲面 $S$ 是由参数方程 $\mathbf{r}(u,v)$ 给出时，所有计算的基础都源于叉乘向量 $\mathbf{r}_u \times \mathbf{r}_v$。

### 1.1 关键：面积元 `dσ`

1.  **计算关键向量：** 首先计算偏导数向量 $\mathbf{r}_u$ 和 $\mathbf{r}_v$，然后计算它们的叉乘 $\mathbf{r}_u \times \mathbf{r}_v$。这个向量是曲面的法向量。

2.  **定义面积元：** 面积元 $d\sigma$ 就是上述叉乘向量的模长。
    $$ d\sigma = |\mathbf{r}_u \times \mathbf{r}_v| \,du\,dv $$

> [!example] 实例：求球面的面积元
> 对于半径为 a 的球面，其参数方程（球坐标）为：
> $$ \mathbf{r}(\phi, \theta) = (a\sin\phi\cos\theta)\mathbf{i} + (a\sin\phi\sin\theta)\mathbf{j} + (a\cos\phi)\mathbf{k} $$
> 其中 $0 \le \phi \le \pi, 0 \le \theta \le 2\pi$。
>
> -   **偏导:**
>     -   $\mathbf{r}_\phi = (a\cos\phi\cos\theta)\mathbf{i} + (a\cos\phi\sin\theta)\mathbf{j} - (a\sin\phi)\mathbf{k}$
>     -   $\mathbf{r}_\theta = (-a\sin\phi\sin\theta)\mathbf{i} + (a\sin\phi\cos\theta)\mathbf{j} + 0\mathbf{k}$
> -   **叉乘:**
>     $$ \mathbf{r}_\phi \times \mathbf{r}_\theta = (a^2\sin^2\phi\cos\theta)\mathbf{i} + (a^2\sin^2\phi\sin\theta)\mathbf{j} + (a^2\sin\phi\cos\phi)\mathbf{k} $$
> -   **模长 (面积元):**
>     $$ d\sigma = |\mathbf{r}_\phi \times \mathbf{r}_\theta| \,d\phi\,d\theta = a^2\sin\phi \,d\phi\,d\theta $$
>     (因为 $0 \le \phi \le \pi$, 所以 $\sin\phi \ge 0$)。

### 1.2 应用：计算曲面面积

总面积就是对面积元进行积分：$A = \iint_S d\sigma = \iint_D |\mathbf{r}_u \times \mathbf{r}_v| \,du\,dv$。

> [!example] 续：求球面面积
> $$ A = \int_0^{2\pi} \int_0^\pi a^2\sin\phi \,d\phi\,d\theta = a^2 \int_0^{2\pi} [-\cos\phi]_0^\pi d\theta = a^2 \int_0^{2\pi} 2\,d\theta = 4\pi a^2 $$

### 1.3 应用：计算标量函数的曲面积分

这相当于给每个微小面积元乘上一个“权重”或“密度” $G(x,y,z)$。
**公式：**
$$ \iint_S G(x,y,z) \,d\sigma = \iint_D G(\mathbf{r}(u,v)) |\mathbf{r}_u \times \mathbf{r}_v| \,du\,dv $$

### 1.4 应用：计算矢量场的通量

通量计算的是矢量场 $\mathbf{F}$ 穿过曲面 $S$ 的净流量。对于参数曲面，法向量和面积元的组合 $\mathbf{n}\,d\sigma$ 可以直接用叉乘向量代替。
**公式：**
$$ \text{通量} = \iint_S \mathbf{F} \cdot \mathbf{n} \,d\sigma = \iint_D \mathbf{F}(\mathbf{r}(u,v)) \cdot (\pm \mathbf{r}_u \times \mathbf{r}_v) \,du\,dv $$
正负号取决于所需的法向量方向（例如向外、向内、向上或向下）。

---

## 二、核心方法二：梯度法

当曲面由隐函数 $f(x,y,z)=c$ 或显函数 $z=g(x,y)$ 给出时，此方法非常有效。

1.  **计算法向量：** 梯度向量 $\nabla f$ 垂直于曲面，可作为法向量。
2.  **选择投影：** 选择一个坐标平面（如 xy-平面）进行投影。
3.  **建立积分：** 使用相应的投影公式建立二重积分。例如，投影到 xy-平面，$\mathbf{n}\,d\sigma = \pm \nabla f \,dA$（其中 $dA=dx\,dy$）。

---

## 三、综合实例分析：抛物柱面的通量

> [!question] 问题
> 求矢量场 $\mathbf{F} = yz\mathbf{i} + x\mathbf{j} - z^2\mathbf{k}$ 穿过抛物柱面 $y=x^2$ ($0 \le x \le 1, 0 \le z \le 4$) 向外的通量。

### 解法 A：参数方程法 (投影到 XZ-平面)

1.  **选择参数与建立方程:** 对于曲面 $y=x^2$，最自然的参数是 $x$ 和 $z$。
    $$ \mathbf{r}(x,z) = x\mathbf{i} + x^2\mathbf{j} + z\mathbf{k} $$
2.  **计算法向量:**
    -   $\mathbf{r}_x = \mathbf{i} + 2x\mathbf{j}$
    -   $\mathbf{r}_z = \mathbf{k}$
    -   $\mathbf{r}_x \times \mathbf{r}_z = 2x\mathbf{i} - \mathbf{j}$。这个向量指向 x 正向（向外），符合题意。
3.  **计算点积:** 在曲面上，$y=x^2$，所以 $\mathbf{F} = x^2z\mathbf{i} + x\mathbf{j} - z^2\mathbf{k}$。
    $$ \mathbf{F} \cdot (\mathbf{r}_x \times \mathbf{r}_z) = (x^2z\mathbf{i} + x\mathbf{j} - z^2\mathbf{k}) \cdot (2x\mathbf{i} - \mathbf{j}) = 2x^3z - x $$
4.  **计算积分:**
    $$ \text{通量} = \int_0^4 \int_0^1 (2x^3z - x) \,dx\,dz = \int_0^4 \left[ \frac{x^4}{2}z - \frac{x^2}{2} \right]_0^1 dz = \int_0^4 \left(\frac{z}{2} - \frac{1}{2}\right) dz = 2 $$

### 解法 B：梯度法 (投影到 XZ-平面)

1.  **建立隐函数:** $f(x,y,z) = x^2 - y = 0$。
2.  **计算梯度法向量:** $\nabla f = 2x\mathbf{i} - \mathbf{j}$。方向与解法 A 一致。
3.  **计算点积:** $\mathbf{F} \cdot \nabla f = 2x^3z - x$，与解法 A 完全相同。
4.  **计算积分:** 积分式与解法 A 完全相同，结果为 2。

### 解法 C：梯度法 (投影到 YZ-平面)

> [!warning] “困难模式”：此方法可行，但更容易出错。

1.  **建立隐函数与梯度:** 同解法 B，$f=x^2-y$, $\nabla f = 2x\mathbf{i} - \mathbf{j}$。
2.  **确定投影公式:** 投影到 yz-平面，积分变量为 $y,z$。公式为：
    $$ \text{通量} = \iint_R (\mathbf{F} \cdot \nabla f) \frac{1}{|\nabla f \cdot \mathbf{i}|} \,dy\,dz $$
3.  **变量统一 (关键步骤):**
    -   投影区域 R: $0 \le y \le 1, 0 \le z \le 4$。
    -   被积函数部分：$\frac{\mathbf{F} \cdot \nabla f}{|\nabla f \cdot \mathbf{i}|} = \frac{2x^3z - x}{|2x|} = x^2z - \frac{1}{2}$。
    -   **必须用 y, z 替换 x:** 从 $y=x^2$ 得 $x=\sqrt{y}$。所以被积函数变为 $yz - \frac{1}{2}$。
4.  **计算积分:**
    $$ \text{通量} = \int_0^4 \int_0^1 \left(yz - \frac{1}{2}\right) dy\,dz = \int_0^4 \left[ \frac{y^2}{2}z - \frac{y}{2} \right]_0^1 dz = \int_0^4 \frac{z-1}{2} dz = 2 $$

---

## 四、学习总结与错误复盘

> [!bug] 我的错误复盘
> 我最初在做这道题时，看到 $y=x^2$ 就想当然地把它当作隐函数 $f(x,y,z)=x^2-y=0$ 来处理，但又试图对它求参数方程的偏导，导致思路混乱。
>
> **错误根源：** 混淆了“隐函数表示法”（核心是求**梯度** $\nabla f$）和“参数方程表示法”（核心是求**叉乘** $\mathbf{r}_u \times \mathbf{r}_v$）。

> [!success] 核心结论与技巧
>
> 1.  **两种方法殊途同归：** 对于可以写成 $z=f(x,y)$ 或 $y=g(x,z)$ 形式的曲面，梯度法和参数法是等价的。你会发现，梯度法中的 $\nabla f$ 与参数法中的 $\mathbf{r}_u \times \mathbf{r}_v$ 通常方向相同或相反。
>
> 2.  **投影平面的黄金法则：** 尽量选择曲面方程的**自变量**所在的平面作为投影面。
>     -   对 $y=f(x,z)$，就投影到 xz-平面。
>     -   对 $z=f(x,y)$，就投影到 xy-平面。
>     这样做可以最大程度地简化计算，避免像解法 C 中那样进行复杂的变量代换，从而减少出错的可能。


# 薄锥形平截面质心的计算

#calculus #center-of-mass #surface-integral #common-mistakes

---

## 问题

> [!question]
> 求密度为常数 $\delta$ 的、由锥面 $z = \sqrt{x^2 + y^2}$ 被平面 $z=1$ 和 $z=2$ 截下的薄锥形平截面（frustum）的质心。

![image.png](https://i.imgur.com/your-image-link.png)
*图源：讲义截图*

---

## 核心公式回顾

求解质心 $(\bar{x}, \bar{y}, \bar{z})$ 的本质是求“加权平均”位置，其计算依赖于总质量和一阶矩：

-   **总质量 (Mass):**
    $$ M = \iint_S \delta \,d\sigma $$
-   **关于 xy-平面的一阶矩 (First Moment):**
    $$ M_{xy} = \iint_S z\delta \,d\sigma $$
-   **质心 z-坐标:**
    $$ \bar{z} = \frac{M_{xy}}{M} $$

---

## 正确解法步骤

### 第一步：利用对称性简化问题

观察可知，该锥面关于 z-轴旋转对称，且密度 $\delta$ 为常数，因此质心必定落在 z-轴上。
$$ \bar{x} = 0, \quad \bar{y} = 0 $$
我们只需要计算 $\bar{z}$。

### 第二步：参数化曲面并计算面积元 `dσ`

使用柱坐标进行参数化是最自然的选择。令 $x=r\cos\theta, y=r\sin\theta$，则 $z=\sqrt{r^2}=r$。
-   **参数方程:** $\mathbf{r}(r, \theta) = r\cos\theta\,\mathbf{i} + r\sin\theta\,\mathbf{j} + r\mathbf{k}$。
-   **参数范围:** 由 $1 \le z \le 2$ 可知 $1 \le r \le 2$；$\theta$ 环绕一周，所以 $0 \le \theta \le 2\pi$。
-   **面积元:** 根据公式或引用已知结果，可得 $|\mathbf{r}_r \times \mathbf{r}_\theta| = \sqrt{2}r$。所以：
    $$ d\sigma = \sqrt{2}r \,dr\,d\theta $$

### 第三步：计算总质量 M

这一步是求解质心的基础。
$$ M = \iint_S \delta \,d\sigma = \int_0^{2\pi} \int_1^2 \delta (\sqrt{2}r) \,dr\,d\theta $$
$$ = \delta\sqrt{2} \int_0^{2\pi} \left[ \frac{r^2}{2} \right]_1^2 d\theta = \delta\sqrt{2} \int_0^{2\pi} \left( \frac{4}{2} - \frac{1}{2} \right) d\theta $$
$$ = \delta\sqrt{2} \int_0^{2\pi} \frac{3}{2} d\theta = \delta\sqrt{2} \cdot \frac{3}{2} \cdot 2\pi = 3\pi\delta\sqrt{2} $$


### 第四步：计算关于 xy-平面的一阶矩 $M_xy$

这一步是计算加权位置的总和。
$$ M_{xy} = \iint_S z\delta \,d\sigma = \int_0^{2\pi} \int_1^2 (r) \delta (\sqrt{2}r) \,dr\,d\theta $$
$$ = \delta\sqrt{2} \int_0^{2\pi} \int_1^2 r^2 \,dr\,d\theta = \delta\sqrt{2} \int_0^{2\pi} \left[ \frac{r^3}{3} \right]_1^2 d\theta $$
$$ = \delta\sqrt{2} \int_0^{2\pi} \left( \frac{8}{3} - \frac{1}{3} \right) d\theta = \delta\sqrt{2} \int_0^{2\pi} \frac{7}{3} d\theta = \delta\sqrt{2} \cdot \frac{7}{3} \cdot 2\pi = \frac{14\pi\delta\sqrt{2}}{3} $$


### 第五步：计算质心坐标 $z_bar$

用一阶矩除以总质量，得到最终的“平均位置”。
$$ \bar{z} = \frac{M_{xy}}{M} = \frac{\frac{14\pi\delta\sqrt{2}}{3}}{3\pi\delta\sqrt{2}} = \frac{14}{3 \cdot 3} = \frac{14}{9} $$

因此，质心坐标为 $(0, 0, \frac{14}{9})$。

---

## 我的错误复盘

> [!bug] 错误诊断：只求一阶矩，忘了求总质量
>
> **我的错误过程：** 我成功地计算出了 $M_{xy} = \frac{14\pi\delta\sqrt{2}}{3}$，然后就卡住了，不知道下一步该做什么。
>
> **错误根源：** 我忽略了质心定义的本质——它是一个**平均值**。
>
> -   **一阶矩 $M_{xy}$** 的物理意义是所有微小质量块 $dm = \delta\,d\sigma$ 与其自身 z-坐标 乘积的总和。它代表了质量分布的一种“倾向”或“力矩”，但它本身**不是一个位置坐标**。
> -   **总质量 $M$** 是所有质量块的总和，是计算平均值时的“分母”或“总权重”。
>
> **一个简单的类比：**
> 假设你想计算两个分数 80分 和 100分 的平均分。
> -   `80 + 100 = 180` 就像是计算“一阶矩”，它只是一个总和，不是最终的平均分。
> -   你必须除以科目总数 `2` (这相当于总质量 `M` 的角色)，才能得到平均分 `180 / 2 = 90`。
>
> 我犯的错误就相当于只算出了`180`，然后就试图把它当作最终答案。忘记计算总质量 $M$ 并进行除法，就等于忘记了“平均”这一核心步骤，导致无法从“总力矩”得到“平均位置”。

> [!summary] 核心教训
> **质心 = (加权位置总和) / (总权重)**。在曲面积分中，这意味着 **$\bar{z} = M_{xy} / M$**。计算一阶矩和计算总质量是求解质心问题**同等重要的两步**，缺一不可。